### Create a new game
# @name createGame
POST http://localhost:3001/api/game/create
Content-Type: application/json

{
  "hostName": "Tester",
  "hostId": "tester-user-1",
  "initialPrompt": "",
  "turnDurationSeconds": 60,
  "maxTurns": 3,
  "maxPlayers": 3,
  "mode": "multi"
}

### List open lobbies
GET http://localhost:3001/api/game/lobbies

### Request to join (needs host approval)
POST http://localhost:3001/api/game/{{createGame.response.body.game.id}}/request-join
Content-Type: application/json

{
  "playerName": "Player2",
  "playerId": "player2-user-1"
}

### Host approves or denies a join request
POST http://localhost:3001/api/game/{{createGame.response.body.game.id}}/review-join
Content-Type: application/json

{
  "hostId": "tester-user-1",
  "playerId": "player2-user-1",
  "approve": true
}

### Host abandons the lobby (closes it)
POST http://localhost:3001/api/game/{{createGame.response.body.game.id}}/abandon
Content-Type: application/json

{
  "playerId": "tester-user-1",
  "reason": "host_left"
}

### Cleanup all waiting lobbies (admin)
POST http://localhost:3001/api/game/cleanup-lobbies
Content-Type: application/json

{}

### List lobbies after cutoff (example minCreatedAt)
@todayNoon = {{$datetime "YYYY-MM-DD"}}T12:00:00.000Z
GET http://localhost:3001/api/game/lobbies?minCreatedAt={{todayNoon}}

### List only the most recent lobby (limit parameter)
GET http://localhost:3001/api/game/lobbies?limit=1

### Submit a turn (uses ID from createGame)
POST http://localhost:3001/api/game/d4875d3d-6ccf-4245-ad18-a7a33dc17675/turn
Content-Type: application/json

{
  "playerName": "Player2",
  "playerId": "player2-user-1",
  "text": "The ballet dancers demanded that the crew leave the ship"
}

### Submit turn 2 (Player2)
POST http://localhost:3001/api/game/{{createGame.response.body.game.id}}/turn
Content-Type: application/json

{
  "playerName": "Player2",
  "playerId": "player2-user-1",
  "text": "A distant howl echoed, and the canopy seemed to bend toward him."
}

### Submit turn 3 (Player3) - should finish the game and return scores
POST http://localhost:3001/api/game/{{createGame.response.body.game.id}}/turn
Content-Type: application/json

{
  "playerName": "Player3",
  "playerId": "player3-user-1",
  "text": "A silver light flickered ahead, promising safety or a trap."
}

### Preview a turn (uses ID from createGame)
POST http://localhost:3001/api/game/{{createGame.response.body.game.id}}/preview
Content-Type: application/json

{
  "playerName": "Player2",
  "playerId": "player2-user-1",
  "text": "A quick sample turn text to get a preview prompt."
}

### Get game state (uses ID from createGame)
GET http://localhost:3001/api/game/{{createGame.response.body.game.id}}

########################################
# Start flow for multiplayer (host + players)

### Start game (host only)
POST http://localhost:3001/api/game/{{createGame.response.body.game.id}}/start
Content-Type: application/json

{
  "playerId": "tester-user-1"
}

### Get game state after start (should show status: active)
GET http://localhost:3001/api/game/{{createGame.response.body.game.id}}
